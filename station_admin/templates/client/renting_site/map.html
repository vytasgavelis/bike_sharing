<html>
<head>
    {% load static %}
    <title>Add Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <link rel="stylesheet" type="text/css" href="{% static 'station_admin/client/css/style.css' %}"/>
    <script type="module" src="./index.js"></script>
    <script src="{% static 'station_admin/client/js/load_side_bar.js' %}"></script>
    <script type="module" src="{% static 'station_admin/client/js/load_google_maps.js' %}"></script>
</head>
<body>
{% load static %}
{% if spot %}
    <div
            data-preselected-spot-id="{{ spot.id }}"
            data-preselected-spot-latitude="{{ spot.site.latitude }}"
            data-preselected-spot-longitude="{{ spot.site.longitude }}"
            data-preselected-spot-site-id="{{ spot.site.id }}"
    ></div>
{% endif %}

<div id="mySidebar" class="sidebar">
    <a class="closebtn" id="sidebar-exit-btn">×</a>
    <a href="#">About</a>
    <a href="#">Services</a>
    <a href="#">Clients</a>
    <a href="#">Contact</a>
</div>

{% if renting_session %}
    <div class="session-status-grid-container">
        <div class="session-status-grid-item1">Ride is active</div>
        <div class="session-status-grid-item2"
             data-session-elapsed-seconds="{{ renting_session.get_elapsed_seconds }}"></div>
    </div>
{% endif %}

<div id="main">
    <div id="sidebar-toggle-btn" class="sidebarr">
        <img style="width: 40px; position:absolute; top: 20vh; z-index: 4"
             src="{% static 'station_admin/client/img/svg/garage_not_selected.svg' %}">
    </div>
</div>

<div id="map"></div>

{% for site in sites %}
    <div class="site-bar" data-side-id='{{ site.id }}'>
        <img class="site-menu-exit-btn" src="{% static 'station_admin/client/img/svg/exit.png' %}"
             data-site-bar-exit-btn='{{ site.id }}'>
        <div class="site-bar-content">
            <h3>{{ site.name }}</h3>
            <p>12 km range</p>

            <div class="site-menu-wrapper">
                <div class="site-menu-button-wrapper">
                    <button class="tab-button active" style="border-top-left-radius: 10px;" data-id="home"
                            data-site-list-type="bike" data-site-id="{{ site.id }}">Bikes
                    </button>

                    <button class="tab-button" style="border-top-right-radius: 10px;" data-id="contact"
                            data-site-list-type="scooter" data-site-id="{{ site.id }}">Scooters
                    </button>
                </div>
                <div class="contentWrapper">
                    <div class="content" id="contact"
                         data-site-vehicle-list="bike-{{ site.id }}">
                        <div class="site-menu-vehicle-list-grid-container">
                            {% for spot in site.get_available_rent_bike_spots %}
                                <div>
                                    Bike - #{{ spot.vehicle.id }}
                                </div>
                                <div>
                                    <button>Reserve</button>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <div class="content" id="contact"
                         data-site-vehicle-list="scooter-{{ site.id }}">
                        <div class="site-menu-vehicle-list-grid-container">
                            {% for spot in site.get_available_rent_scooter_spots %}
                                <div>
                                    Scooter - #{{ spot.vehicle.id }}
                                </div>
                                <div>
                                    <button>Reserve</button>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>


        </div>

        {{ site.rent_charge_rule.price }}€ / min.
    </div>
{% endfor %}

{% if spot %}
    <div class="site-bar" data-side-id='{{ site.id }}' data-rent-spot-id="{{ spot.id }}">
        <img class="site-menu-exit-btn" src="{% static 'station_admin/client/img/svg/exit.png' %}"
             data-site-bar-exit-btn='{{ site.id }}'>
        <div class="rent-spot-menu-grid-container">
            <div class="rent-spot-menu-grid-item1">
                {% if spot.vehicle.type == 'bike' %}
                    Bike #{{ spot.vehicle.id }}
                {% else %}
                    Scooter #{{ spot.vehicle.id }}
                {% endif %}
            </div>
            {% if spot.vehicle.type == 'bike' %}
                <div class="rent-spot-menu-grid-item2"><img src="{% static 'station_admin/client/img/svg/bicycle.svg' %}">
            {% else %}
                <div class="rent-spot-menu-grid-item2"><img src="{% static 'station_admin/client/img/svg/scooter.svg' %}">
            {% endif %}
            </div>
        </div>

        <button>Start ride</button>
        <div>{{ spot.site.rent_charge_rule.price }}€ / min.</div>
    </div>
{% endif %}

<script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_rEmoEcSpdJD8JWwvtXmr8nzX_rzKqQQ&callback=initMap&v=weekly"
        defer
></script>
</body>
</html>